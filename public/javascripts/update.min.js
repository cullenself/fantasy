function hidePros(){$('td.hidden').hide(),$('table#top').click(a=>{a.stopPropagation();const b=$(a.target);b.closest('td').hasClass('hidden')?b.closest('td').slideToggle():b.closest('tr.main').children('td').hasClass('hidden')?b.closest('tr.main').children('td').slideToggle():b.closest('tr.main').next().children('.hidden').slideToggle()})}async function updateScore(){const a=await Promise.all([$.getJSON('/javascripts/teams.json'),$.getJSON('/stats?callback=?')]),b=[],c=a[0],d=a[1];return Object.keys(c).forEach(a=>{const e={part:a,wins:0,pros:[]};Object.values(c[a]).forEach(a=>{e.pros.push(d.pro_teams.find(b=>b.name===a))}),e.wins=e.pros.reduce((a,b)=>a+b.wins,0),b.push(e)}),b.sort((a,b)=>b.wins-a.wins),{score:b,timestamp:d.timestamp}}function loadTable(){const a=$('script#table-template').html(),b=$('script#footer-template').html();updateScore().then(c=>{const d=Mustache.render(a,{score:c.score});$('tbody#table-target').html(d),hidePros();const e=Mustache.render(b,{timestamp:c.timestamp});$('div#footer-target').html(e)})}